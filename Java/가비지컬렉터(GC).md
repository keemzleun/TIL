## 가비지 컬렉터(GC)

- 가비지(Garbage): 유효하지 않은 메모리
- 가비지 컬렉터: 불필요한 메모리를 정리해줌


- 가비지 컬렉터의 원리

  - 가비지 컬렉터가 하는 일
  1. 메모리 할당 
  2. 사용중인 메모리 인식
  3. 사용하지 않는 메모리 인식

  - 프로그램을 실행할 때 메모리를 관리하는 OS에 프로그램 실행에 필요한 메모리를 요청(이 때 어디에 저장할 지 그 주소를 할당하는데 이 주소를 offset 주소라고 부름)
  - 이 할당된 메모리들은 프로그램이 돌아가면 필연적으로 가비지가 발생

    ← 기존에 가리키고 있던 메모리를 새롭게 선언되거나 형변환이 되면서 다른 곳을 가리키게 되면서 주소를 잃어버리고 다시 찾을 수 없게 되면서 메모리가 생겨버리기 때문

  - 따라서 가비지 컬렉터가 가비지를 다른 용도로 사용할 수 있도록 메모리를 해제시킴
  - 자바에서는 JVM이 메모리를 부여받고 프로그램을 실행하면서 메모리가 부족해지는 순간이 오면 추가적으로 메모리를 더 요청 → 요청하는 때에 가비지 컬렉터가 실행


- JVM의 Heap영역은 처음 설계될 때 다음 2가지의 전제로 설계됨
    - 대부분의 객체는 금방 접근 불가능한 상태가 됨
    - 오래된 객체에서 새로운 객체로의 참조는 아주 적게 존재

  ⇒ 객체는 대부분 일회성이며, 메모리에 오랫동안 남아있는 경우는 드묾

  ⇒ 객체의 생존 기간에 따라 물리적인 Heap 영역을 나누어, Young과 Old 총 2가지 영역으로 설계


- Young 영역(Young Generation)
    - 새롭게 생성된 객체가 할당되는 영역
    - 대부분의 객체가 금방 Unreachable 상태가 되기 때문에, 많은 객체가 Young 영역에 생성되었다가 사라짐
    - Young 영역에 대한 가비지 컬렉션을 **Minor GC**라고 부름


- Old 영역(Old Generation)
    - Young 영역에서 Reachable 상태를 유지하여 살아남은 객체가 복사되는 영역
    - Young 영역보다 크게 할당되며, 영역의 크기가 큰 만큼 가비지는 적게 발생
    - Old 영역에 대한 가비지 컬렉션을 **Major GC**라고 부름