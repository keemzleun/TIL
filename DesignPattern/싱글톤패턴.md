## 싱글톤 객체(싱글톤 패턴)이란

- 위키백과

[소프트웨어 디자인 패턴](https://ko.wikipedia.org/wiki/%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4_%EB%94%94%EC%9E%90%EC%9D%B8_%ED%8C%A8%ED%84%B4)에서 **싱글턴 패턴**(Singleton pattern)을 따르는 클래스는, 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다.

이와 같은 디자인 유형을 **싱글턴 패턴**이라고 한다. 주로 공통된 객체를 여러개 생성해서 사용하는 DBCP(DataBase Connection Pool)와 같은 상황에서 많이 사용된다.

- 싱글톤 패턴: 객체의 인스턴스가 오직 1개만 생성되는 패턴

```java
public class Singleton {

    private static Singleton instance = new Singleton();
    
    private Singleton() {
        // 생성자는 외부에서 호출못하게 private 으로 지정해야 한다.
    }

    public static Singleton getInstance() {
        return instance;
    }

    public void say() {
        System.out.println("hi, there");
    }
}
```

- 사용하는 이유
    - **메모리 낭비를 방지**: 최초 한번의 new 연산자를 통해서 고정된 메모리 영역을 사용하기 때문에 추후 해당 객체에 접급할 때 메모리 낭비를 방지할 수 있음
    - **다른 클래스 간 데이터 공유 용이**: 싱글톤 인스턴스는 전역으로 사용되는 인스턴스이기 때문에 다른 클래스의 인스턴스들이 접근하여 사용할 수 있음.

      → 하지만 여러 클래스의 인스턴스에서 싱글톤 인스턴스의 데이터에 동시에 접근하게 되면 동시성 문제가 발생할 수 있으니 유의해야 함

    
- 단점
    - 만약 싱글톤 인스턴스가 혼자 너무 많은 일을 하거나, 많은 데이터를 공유시키면 다른 클래스들 간의 결합도가 높아지게 되는데, 이때 개방-폐쇄 원칙이 위배된다. 결합도가 높아지게 되면, 유지보수가 힘들고 테스트도 원활하게 진행할 수 없는 문제점이 발생한다.
    - 구현 코드가 많이 필요
    - 테스트하기 어려움
    - 의존 관계상 클라이언트가 구체 클래스에 의존

      →new 키워드를 직접 사용하여 클래스 안에서 객체를 생성하고 있으므로, 이는 SOLID 원칙 중 DIP를 위반하게 되고 OCP원칙 또한 위반할 가능성이 높음

- 결론
    - 오직 한 개의 인스턴스 생성을 보증하여 효율을 찾을 수 있지만 그에 못지 않게 수반되는 문제점도 많음
    - 싱글톤 패턴은 안티패턴으로 불릴 만큼 단독으로 사용한다면 객체 지향에 위반되는 사례가 많음
    - 스프링 컨테이너 같은 프레임워크의 도움을 받으면 싱글톤 패텀의 문제점들을 보완하면서 장점의 혜택을 누릴 수 있음
    - 실제로 스프링 빈은 컨테이너의 도움을 받아 싱글톤 스코프로 관리되고 있음